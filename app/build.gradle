plugins {
    id 'com.android.application'
}

android {
    namespace 'com.example.demo'

    ndkVersion '29.4.7075529'
    compileSdk 33

    defaultConfig {
        applicationId "com.example.demo"
        minSdk 24
        targetSdk 33
        versionCode 1
        versionName "1.0"
        buildConfigField "boolean", "IS_NEW_ARCHITECTURE_ENABLED", isNewArchitectureEnabled().toString()
        ndk{
            abiFilters 'arm64-v8a'
        }
//        if (System.properties['os.arch'] == "aarch64") {
//            // For M1 Users we need to use the NDK 24 which added support for aarch64
//            ndkVersion = "24.0.8215888"
//        } else {
//            // Otherwise we default to the side-by-side NDK version from AGP.
//            ndkVersion = "21.4.7075529"
//        }

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

//    buildTypes {
//        release {
//            minifyEnabled false
//            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
//        }
//    }
//    compileOptions {
//        sourceCompatibility JavaVersion.VERSION_1_8
//        targetCompatibility JavaVersion.VERSION_1_8
//    }

}

dependencies {

    implementation fileTree(dir: "libs", include: ["*.jar", "*.aar"])
//    implementation fileTree("libs")
    //implementation files('libs/commonlib2-debug.aar')

    implementation 'androidx.appcompat:appcompat:1.4.1'
    implementation 'com.google.android.material:material:1.6.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
    implementation 'com.hjq:xxpermissions:5.2'

    testImplementation 'junit:junit:4.13.2'
    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'

    implementation ('androidx.recyclerview:recyclerview:1.2.0') {
        exclude group: 'com.android.support'
    }
    implementation 'com.yanzhenjie.recyclerview:support:1.3.2'

    //ReactNative 依赖
    implementation "com.facebook.react:react-native:0.57.8"
//    implementation "org.webkit:android-jsc:r250230"
//    implementation 'com.facebook.soloader:soloader:0.9.0+'
//    implementation ('com.facebook.react:react-native:0.57.7'){
//        exclude group: 'com.squareup.okhttp3', module: 'okhttp'
//        exclude group: 'com.squareup.okio', module: 'okio'
//    }

    implementation 'com.wang.avi:library:2.1.3'

    implementation('com.zhouyou:rxeasyhttp:2.1.0') {
        exclude group: 'com.google.code.gson'
        exclude group: 'com.squareup.okhttp3', module: 'okhttp'
    }

    implementation 'com.google.code.gson:gson:2.8.5'

    implementation 'com.squareup.okhttp3:okhttp:3.12.12'
    implementation 'com.squareup.okio:okio:1.15.0'

    implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0-alpha02'

//    implementation 'com.ymtz.commonlib:commonlib:1.0.0'

    implementation project(":commonlib")


}

def isNewArchitectureEnabled() {
    // To opt-in for the New Architecture, you can either:
    // - Set `newArchEnabled` to true inside the `gradle.properties` file
    // - Invoke gradle with `-newArchEnabled=true`
    // - Set an environment variable `ORG_GRADLE_PROJECT_newArchEnabled=true`
    return project.hasProperty("newArchEnabled") && project.newArchEnabled == "true"
}
